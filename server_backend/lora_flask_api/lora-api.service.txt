# sudo nano /etc/systemd/system/lora-api.service
[Unit]
Description=LoRa Flask API Server
After=network.target postgresql.service
Wants=postgresql.service

[Service]
Type=simple
User=root
Group=root
WorkingDirectory=/root/lora_flask_api
Environment=PATH=/root/lora_flask_api/venv/bin
Environment=PYTHONUNBUFFERED=1

# Используем Gunicorn вместо прямого запуска Python
ExecStart=/root/lora_flask_api/venv/bin/gunicorn \
          --bind 0.0.0.0:5001 \
          --workers 2 \
          --timeout 60 \
          --access-logfile - \
          --error-logfile - \
          lora_api:app

Restart=always
RestartSec=10

# Логирование
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
