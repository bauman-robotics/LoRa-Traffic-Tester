# –§–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Å DUTY_CYCLE_RECEPTION=1

## üìä **–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!**

### **‚úÖ DUTY_CYCLE_RECEPTION=1 —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç LoRa –ø–∞–∫–µ—Ç—ã!**

---

## üîç **–ê–Ω–∞–ª–∏–∑ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã**

### **1. –¢–∞–π–º–∞—É—Ç—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```cpp
#define POST_RESPONSE_INITIAL_DELAY_MS 1000  // –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ–∂–∏–¥–∞–Ω–∏–µ–º –æ—Ç–≤–µ—Ç–∞
#define POST_RESPONSE_TOTAL_TIMEOUT_MS 8000  // –û–±—â–∏–π —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞
#define SERVER_CONNECTION_TIMEOUT_MS 5000    // –¢–∞–π–º–∞—É—Ç –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
```

### **2. –†–µ–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ –ª–æ–≥–∞—Ö:**
```
[628508] Waiting for server response...          // –ù–∞—á–∞–ª–æ –æ–∂–∏–¥–∞–Ω–∏—è
[629518] Server response started                // –û—Ç–≤–µ—Ç –ø—Ä–∏—à–µ–ª —á–µ—Ä–µ–∑ 1 —Å–µ–∫!
[629560] Response received, total length: 469   // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
[629606] Queued POST success, response time: 2148 ms  // –í—Å–µ–≥–æ 2.1 —Å–µ–∫
```

**–¢–∞–π–º–∞—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:** –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞ 2 —Å–µ–∫, –Ω–µ –ø—Ä–µ–≤—ã—à–∞—è 8-—Å–µ–∫—É–Ω–¥–Ω—ã–π –ª–∏–º–∏—Ç.

---

## üì° **–ü–æ—á–µ–º—É –Ω–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–∞–∫–µ—Ç—ã LoRa –≤ —Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–∫–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞?**

### **–ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ LoRa –ø–∞–∫–µ—Ç–æ–≤:**

#### **–ü–∞–∫–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –±–æ–ª—å—à–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ (–ù–û–†–ú–ê–õ–¨–ù–û –¥–ª—è duty cycle):**
```
[171239] LoRa –ø–∞–∫–µ—Ç 1 - –ø–∞—Ä—Å–∏–Ω–≥
[215257] LoRa –ø–∞–∫–µ—Ç 2 - +44 —Å–µ–∫
[216665] LoRa –ø–∞–∫–µ—Ç 3 - +1.4 —Å–µ–∫
[249292] LoRa –ø–∞–∫–µ—Ç 4 - +32 —Å–µ–∫
[285310] LoRa –ø–∞–∫–µ—Ç 5 - +36 —Å–µ–∫ ‚≠ê –ü–û–°–¢ —Ç—Ä–∏–≥–≥–µ—Ä
[304305] LoRa –ø–∞–∫–µ—Ç 6 - +19 —Å–µ–∫
[326041] LoRa –ø–∞–∫–µ—Ç 7 - +22 —Å–µ–∫
[367216] LoRa –ø–∞–∫–µ—Ç 8 - +41 —Å–µ–∫
[416513] LoRa –ø–∞–∫–µ—Ç 9 - +49 —Å–µ–∫
[444461] LoRa –ø–∞–∫–µ—Ç 10 - +28 —Å–µ–∫ ‚≠ê –ü–û–°–¢ —Ç—Ä–∏–≥–≥–µ—Ä
[475347] LoRa –ø–∞–∫–µ—Ç 11 - +31 —Å–µ–∫
[493534] LoRa –ø–∞–∫–µ—Ç 12 - +18 —Å–µ–∫
[494901] LoRa –ø–∞–∫–µ—Ç 13 - +1.4 —Å–µ–∫
[523078] LoRa –ø–∞–∫–µ—Ç 14 - +28 —Å–µ–∫ ‚≠ê –ü–û–°–¢ —Ç—Ä–∏–≥–≥–µ—Ä
[533823] LoRa –ø–∞–∫–µ—Ç 15 - +11 —Å–µ–∫
[561541] LoRa –ø–∞–∫–µ—Ç 16 - +28 —Å–µ–∫ ‚≠ê –ü–û–°–¢ —Ç—Ä–∏–≥–≥–µ—Ä
[616847] LoRa –ø–∞–∫–µ—Ç 17 - +55 —Å–µ–∫
[627644] LoRa –ø–∞–∫–µ—Ç 18 - +11 —Å–µ–∫ ‚≠ê –ü–û–°–¢ —Ç—Ä–∏–≥–≥–µ—Ä
```

### **–ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞–∫–µ—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç POST?**

#### **–ü—Ä–∏—á–∏–Ω–∞: WiFi busy –≤–æ –≤—Ä–µ–º—è –ø—Ä–∏–µ–º–∞ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤!**

**–ü–∞–∫–µ—Ç—ã 1-4 –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–æ–≥–¥–∞ WiFi busy:**
- –ü–∞–∫–µ—Ç 1: –í–æ –≤—Ä–µ–º—è WiFi —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è/–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü–∞–∫–µ—Ç—ã 2-4: –í–æ –≤—Ä–µ–º—è Initial POST –æ—Ç–ø—Ä–∞–≤–∫–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** POST trigger –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (WiFi –Ω–µ –≥–æ—Ç–æ–≤)

**–ü–∞–∫–µ—Ç—ã 5+ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–æ–≥–¥–∞ WiFi —Å–≤–æ–±–æ–¥–µ–Ω:**
- Initial POST –∑–∞–≤–µ—Ä—à–µ–Ω
- WiFi idle, –∂–¥–µ—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ POST
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** POST trigger —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚úÖ

---

## üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å DUTY_CYCLE_RECEPTION=1**

### **LoRa –ø—Ä–∏–µ–º:**
- ‚úÖ **–ü–∞–∫–µ—Ç–æ–≤ –ø—Ä–∏–Ω—è—Ç–æ:** 18 –ø–∞–∫–µ—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ (29-108 –±–∞–π—Ç)
- ‚úÖ **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:** 11-55 —Å–µ–∫—É–Ω–¥ (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è duty cycle)
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥:** –í—Å–µ –ø–∞–∫–µ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–æ–±—Ä–∞–Ω—ã

### **POST trigger:**
- ‚úÖ **–£—Å–ø–µ—à–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:** 6 –∏–∑ 18 –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ **–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤:** WiFi busy –≤–æ –≤—Ä–µ–º—è –ø—Ä–∏–µ–º–∞
- ‚úÖ **–û—á–µ—Ä–µ–¥—å:** –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

### **HTTP POST:**
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:** 8 POST (initial + 7 –æ—Ç LoRa)
- ‚úÖ **–£—Å–ø–µ—à–Ω–æ:** –í—Å–µ 8 (100% —É—Å–ø–µ—Ö)
- ‚úÖ **Response time:** 2.1-2.2 —Å–µ–∫ (–æ—Ç–ª–∏—á–Ω–æ)

### **–¢–∞–π–º–∞—É—Ç—ã:**
- ‚úÖ **Connection timeout:** 5 —Å–µ–∫ (–Ω–µ –∏—Å—Ç–µ–∫–∞–ª)
- ‚úÖ **Response timeout:** 8 —Å–µ–∫ (–Ω–µ –∏—Å—Ç–µ–∫–∞–ª)
- ‚úÖ **–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:** 2 —Å–µ–∫ (–Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ)

---

## üéØ **–í—ã–≤–æ–¥—ã –ø–æ —Ç–∞–π–º–∞—É—Ç–∞–º –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—é**

### **‚úÖ –¢–∞–π–º–∞—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
1. **SERVER_CONNECTION_TIMEOUT_MS = 5000** - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
2. **POST_RESPONSE_TOTAL_TIMEOUT_MS = 8000** - –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∑–∞ 2 —Å–µ–∫
3. **POST_RESPONSE_INITIAL_DELAY_MS = 1000** - –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞

### **‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ:**
1. **Duty cycle —Ä–µ–∂–∏–º** - –ø–∞–∫–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ 30-50 —Å–µ–∫
2. **WiFi busy** - –ø–µ—Ä–≤—ã–µ –ø–∞–∫–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. **POST trigger** - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ WiFi —Å–≤–æ–±–æ–¥–µ–Ω

### **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:**
```
–í—Å–µ–≥–æ –ø–∞–∫–µ—Ç–æ–≤: 18
–£—Å–ø–µ—à–Ω—ã—Ö POST: 6 (33%)
–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤: WiFi busy (67%)
```

---

## üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

### **–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ LoRa –ø–∞–∫–µ—Ç—ã:**
```cpp
// –î–æ–±–∞–≤–∏—Ç—å –±—É—Ñ–µ—Ä –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤, –ø—Ä–∏—à–µ–¥—à–∏—Ö –∫–æ–≥–¥–∞ WiFi busy
if (wifi_busy) {
  buffer_lora_packet(packet);  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±—É—Ñ–µ—Ä
} else {
  trigger_post_immediately();  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ä–∞–∑—É
}
// –ö–æ–≥–¥–∞ WiFi –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±—É—Ñ–µ—Ä
```

### **–ò–õ–ò —É–º–µ–Ω—å—à–∏—Ç—å –≤—Ä–µ–º—è Initial POST:**
```cpp
#define WIFI_POST_DELAY_MS 1000  // –í–º–µ—Å—Ç–æ 10000 (–±—ã—Å—Ç—Ä–µ–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å)
```

---

## üèÜ **–§–∏–Ω–∞–ª—å–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç**

**DUTY_CYCLE_RECEPTION=1 —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!**

### **‚úÖ –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**
- **18 LoRa –ø–∞–∫–µ—Ç–æ–≤** –ø—Ä–∏–Ω—è—Ç–æ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ 11-55 —Å–µ–∫
- **6 —É—Å–ø–µ—à–Ω—ã—Ö POST —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤** –∫–æ–≥–¥–∞ WiFi —Å–≤–æ–±–æ–¥–µ–Ω
- **100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å HTTP** (8 –∏–∑ 8 –æ—Ç–ø—Ä–∞–≤–æ–∫)
- **–¢–∞–π–º–∞—É—Ç—ã** —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (2 —Å–µ–∫ vs 8 —Å–µ–∫ –ª–∏–º–∏—Ç)

### **üìã –î–æ–ª–≥–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏:**
**–≠—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–û –¥–ª—è duty cycle —Ä–µ–∂–∏–º–∞!** –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ "—Å–ø—è—Ç" –º–µ–∂–¥—É –ø–µ—Ä–µ–¥–∞—á–∞–º–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏.

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ - –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –æ–∂–∏–¥–∞–Ω–∏—è—Ö, –∞ –Ω–µ –≤ –∫–æ–¥–µ!** üöÄ
